---
title: "Ubuntu Desktop VM Setup"
date: 2024-12-21 00:00:00 -0800
categories: [Cybersecurity Lab, Initial Setup]
tags: [cybersecurity, homelab]
description: Setting up an Ubuntu VM to manage our servers.
---

# Ubuntu Desktop Setup

We will use an Ubuntu Desktop environment to manage various aspects of the SOC.

For now, we will use it to manage the OPNsense Firewall.

Get the ISO from: [https://ubuntu.com/download/desktop](https://ubuntu.com/download/desktop)

### VM Setup

Follow the same process of setting a VM like earlier:

On the left of OracleBox, click **Machine > New**

Give the VM a name

Select the ISO path

I gave this VM 2GB RAM, 2 CPUs, and 25GB storage (again, we can adjust this later as needed)

Skip unattended installation

![1](/assets/img/cyberlab/setup/ubuntu/1.png){: width="900" height="400" }

For now, set Adapter 1 to NAT and Adapter 2 to cyberlab-soc.

**Note**: During this set up, we are not going to stay loyal to the topology. The reason for this is because:

1. The router/firewall is not completely set up. The VMs will be unable to communicate with each other, let alone access the Internet.

2. Most installations require internet access. The NAT option is the most convenient option for Internet access right out of the gate. 

![2](/assets/img/cyberlab/setup/ubuntu/2.png){: width="500" height="400" }

### Ubuntu Download

Boot the VM and select Try or Install Ubuntu 

![3](/assets/img/cyberlab/setup/ubuntu/3.png){: width="900" height="400" }

You may run into this graphics controller error

![4](/assets/img/cyberlab/setup/ubuntu/4.png){: width="600" height="400" }

To fix it, stop the VM

Right click the VM > Settings > Display 

Set the graphics controller to VBoxSVGA

![5](/assets/img/cyberlab/setup/ubuntu/5.png){: width="600" height="400" }

Boot the VM again and run through the installation (language, keyboard set up, etc)

![6](/assets/img/cyberlab/setup/ubuntu/6.png){: width="600" height="400" }

Use wired connection (NAT)

![7](/assets/img/cyberlab/setup/ubuntu/7.png){: width="600" height="400" }

Install Ubuntu

![8](/assets/img/cyberlab/setup/ubuntu/8.png){: width="600" height="400" }

Interactive Installation

![9](/assets/img/cyberlab/setup/ubuntu/9.png){: width="600" height="400" }

Default selection

![10](/assets/img/cyberlab/setup/ubuntu/10.png){: width="600" height="400" }

Did not check, next

![11](/assets/img/cyberlab/setup/ubuntu/11.png){: width="600" height="400" }

Erase disk and install Ubuntu. This shouldn’t take too long (~5 minutes)

![12](/assets/img/cyberlab/setup/ubuntu/12.png){: width="600" height="400" }

Give the VM a name and host name

![13](/assets/img/cyberlab/setup/ubuntu/13.png){: width="600" height="400" }

Select a timezone

![14](/assets/img/cyberlab/setup/ubuntu/14.png){: width="600" height="400" }

Install

![15](/assets/img/cyberlab/setup/ubuntu/15.png){: width="600" height="400" }

It shouldn’t take too long (~ 5 minutes)

![16](/assets/img/cyberlab/setup/ubuntu/16.png){: width="600" height="400" }

Skip

![17](/assets/img/cyberlab/setup/ubuntu/17.png){: width="600" height="400" }

Restart now

![18](/assets/img/cyberlab/setup/ubuntu/18.png){: width="600" height="400" }

Shut the VM and set it so that it boots from the hard disk

![19](/assets/img/cyberlab/setup/ubuntu/19.png){: width="600" height="400" }

Once we are back in, open a terminal and run `ip a`

We should have 2 IPs

enp0s3 (Adapter  1: NAT) 

enp0s8 (Adapter 2: cyberlab-soc) - It should receive an IP since we enabled DHCP for this LAN

This VM can access the internet via Adapter 1 and communicate with OPNsense via Adapter 2, but we still need to set up the routing rules

![20](/assets/img/cyberlab/setup/ubuntu/20.png){: width="900" height="400" }

### Guest Additions Installation

Before proceeding, set up VBox guest additions for a smoother experience

On top of the VM, click **Devices > Insert VBox Guest Additions**

Run `lsblk` in the terminal

You should see `/media/name/VBox_GAs_version` 

cd into this directory 

run `sudo ./VBoxLinuxAdditions.run`

![21](/assets/img/cyberlab/setup/ubuntu/21.png){: width="900" height="400" }

**Note**: You may need to install bzip2 first

In this case, just run `sudo apt-get install bzip2`

![22](/assets/img/cyberlab/setup/ubuntu/22.png){: width="900" height="400" }


### **Next**: [OPNsense Firewall Configurations](/posts/firewall)